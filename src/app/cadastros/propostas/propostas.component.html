<div class="proposta-tabs">
  <div class="tab" [class.active]="activeTab === 'criacao'" (click)="activeTab = 'criacao'">Cria√ß√£o de Propostas</div>
  <div class="tab" [class.active]="activeTab === 'textos'" (click)="activeTab = 'textos'">Textos Padr√£o</div>
  <div class="tab" [class.active]="activeTab === 'licitacoes'" (click)="activeTab = 'licitacoes'">Licita√ß√µes</div>
</div>

<div *ngIf="activeTab === 'criacao'">
  <div class="proposta-container">
    <div class="proposta-header-bar">
      <h2>Cadastro de Proposta Comercial</h2>
      <div class="proposta-header-actions">
        <a href="#" class="header-link" [class.active]="formView === 'form'" (click)="$event.preventDefault(); formView = 'form';">
          <i class="bi bi-ui-checks"></i> Formul√°rio
        </a>
        <a href="#" class="header-link" [class.active]="formView === 'lista'" (click)="$event.preventDefault(); formView = 'lista';">
          <i class="bi bi-list"></i> Lista
        </a>
      </div>
    </div>
    <ng-container *ngIf="formView === 'form'">
      <form class="proposta-form">
        <div class="form-section">
          <h3>Dados da Proposta</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="dataEmissao">Data de Emiss√£o</label>
              <input type="date" id="dataEmissao" name="dataEmissao" />
            </div>
            <div class="form-group">
              <label for="numeroProposta">N¬∫ Proposta</label>
              <input type="text" id="numeroProposta" name="numeroProposta" placeholder="Ex: COM.MB.07/25 Rev. 0" />
            </div>
            <div class="form-group">
              <label for="cliente">Cliente</label>
              <select id="cliente" name="cliente">
                <option *ngFor="let c of clientesFake" [value]="c">{{ c }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="destinatario">Destinat√°rio</label>
              <input type="text" id="destinatario" name="destinatario" placeholder="Pessoa ou departamento" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="objeto">Objeto do Servi√ßo</label>
              <input type="text" id="objeto" name="objeto" />
            </div>
            <div class="form-group">
              <label for="local">Local do Servi√ßo</label>
              <input type="text" id="local" name="local" placeholder="Cidade/UF" />
            </div>
            <div class="form-group">
              <label for="modalidade">Modalidade Contratual</label>
              <input type="text" id="modalidade" name="modalidade" placeholder="Ex: Empreitada a Pre√ßo Unit√°rio" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="descricao">Descri√ß√£o T√©cnica do Objeto</label>
              <textarea id="descricao" name="descricao" rows="3"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="anexo">Figura/Anexo</label>
              <input type="file" id="anexo" name="anexo" accept="image/*,application/pdf" />
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>Escopo</h3>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="escopoContratante">Escopo da Contratante</label>
              <textarea id="escopoContratante" name="escopoContratante" rows="2" placeholder="Itens personalizados, um por linha"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="escopoContratada">Escopo da Contratada</label>
              <textarea id="escopoContratada" name="escopoContratada" rows="2" placeholder="Itens personalizados, um por linha"></textarea>
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>Planilha de Quantidades</h3>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="planilha">Upload de Planilha</label>
              <input type="file" id="planilha" name="planilha" accept=".xls,.xlsx,.csv,.pdf" />
            </div>
            <div class="form-group full-width">
              <label>Itens Din√¢micos</label>
              <button type="button" class="btn-add-item">Adicionar Item</button>
              <!-- Aqui futuramente vir√° a tabela din√¢mica de itens -->
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>Condi√ß√µes e Prazo</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="prazoExecucao">Prazo de Execu√ß√£o</label>
              <input type="text" id="prazoExecucao" name="prazoExecucao" />
            </div>
            <div class="form-group">
              <label for="condicoesPagamento">Condi√ß√µes de Pagamento</label>
              <input type="text" id="condicoesPagamento" name="condicoesPagamento" />
            </div>
            <div class="form-group">
              <label for="validade">Validade da Proposta</label>
              <input type="text" id="validade" name="validade" placeholder="Ex: 30 dias" />
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>Contato e Respons√°vel</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="contatoComercial">Contato Comercial</label>
              <input type="text" id="contatoComercial" name="contatoComercial" />
            </div>
            <div class="form-group">
              <label for="responsavelTecnico">Respons√°vel T√©cnico</label>
              <input type="text" id="responsavelTecnico" name="responsavelTecnico" />
            </div>
            <div class="form-group">
              <label for="assinatura">Assinatura Digital (opcional)</label>
              <input type="file" id="assinatura" name="assinatura" accept="image/*,application/pdf" />
            </div>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary">Salvar Proposta</button>
          <button type="button" class="btn-secondary">Cancelar</button>
          <button type="button" class="btn-print" (click)="imprimirRascunho()"><i class="bi bi-printer"></i> Imprimir Rascunho</button>
        </div>
      </form>
    </ng-container>
    <ng-container *ngIf="formView === 'lista'">
      <div class="propostas-lista-fake">
        <h3>Propostas Cadastradas</h3>
        <table>
          <thead>
            <tr>
              <th style="width:40px;"></th>
              <th>N¬∫ Proposta</th>
              <th>Cliente</th>
              <th>Data de Emiss√£o</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let proposta of propostasFake">
              <td>
                <button class="btn-print" title="Imprimir Proposta" (click)="imprimirProposta(proposta)"><i class="bi bi-printer"></i></button>
              </td>
              <td>{{ proposta.numero }}</td>
              <td>{{ proposta.cliente }}</td>
              <td>{{ proposta.data }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusBadgeClass(proposta.status)">{{ proposta.status }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-container>
  </div>
</div>
<div *ngIf="activeTab === 'textos'">
  <div class="proposta-container">
    <div class="proposta-header-bar">
      <h2>Textos Padr√£o e Observa√ß√µes</h2>
      <div class="proposta-header-actions">
        <a href="#" class="header-link" [class.active]="textosView === 'form'" (click)="$event.preventDefault(); textosView = 'form';">
          <i class="bi bi-ui-checks"></i> Formul√°rio
        </a>
        <a href="#" class="header-link" [class.active]="textosView === 'lista'" (click)="$event.preventDefault(); textosView = 'lista';">
          <i class="bi bi-list"></i> Lista
        </a>
      </div>
    </div>
    <ng-container *ngIf="textosView === 'form'">
      <form class="proposta-form">
        <div class="form-section">
          <h3>Observa√ß√µes e Textos Padr√£o</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tituloTexto">T√≠tulo</label>
              <input type="text" id="tituloTexto" name="tituloTexto" placeholder="T√≠tulo do texto padr√£o" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="observacoes">Observa√ß√µes Adicionais</label>
              <textarea id="observacoes" name="observacoes" rows="2"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="textosPadrao">Textos Padr√£o</label>
              <textarea id="textosPadrao" name="textosPadrao" rows="4" placeholder="Declara√ß√µes institucionais, compromissos legais, cl√°usulas padr√£o etc."></textarea>
            </div>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary">Salvar Texto</button>
          <button type="button" class="btn-secondary">Cancelar</button>
        </div>
      </form>
    </ng-container>
    <ng-container *ngIf="textosView === 'lista'">
      <div class="propostas-lista-fake">
        <h3>Textos Padr√£o Cadastrados</h3>
        <table>
          <thead>
            <tr>
              <th>T√≠tulo</th>
              <th style="width:60px;"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let texto of textosFake">
              <td>{{ texto.titulo }}</td>
              <td>
                <span class="icon-actions">
                  <i class="bi bi-pencil-square"></i>
                  <i class="bi bi-trash"></i>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-container>
  </div>
</div>
<div *ngIf="activeTab === 'licitacoes'">
  <div class="proposta-container">
    <div class="proposta-header-bar">
      <h2>Cadastro de Licita√ß√£o</h2>
      <div class="proposta-header-actions">
        <a href="#" class="header-link" [class.active]="licitacoesView === 'form'" (click)="$event.preventDefault(); licitacoesView = 'form';">
          <i class="bi bi-ui-checks"></i> Formul√°rio
        </a>
        <a href="#" class="header-link" [class.active]="licitacoesView === 'lista'" (click)="$event.preventDefault(); licitacoesView = 'lista';">
          <i class="bi bi-list"></i> Lista
        </a>
      </div>
    </div>
    <ng-container *ngIf="licitacoesView === 'form'">
      <form class="proposta-form">
        <div class="form-section">
          <h3>üßæ Informa√ß√µes Gerais da Licita√ß√£o</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="numLicitacao">N√∫mero da Licita√ß√£o</label>
              <input type="text" id="numLicitacao" name="numLicitacao" placeholder="Ex: 001/2025" />
            </div>
            <div class="form-group">
              <label for="modalidade">Modalidade</label>
              <input type="text" id="modalidadeLicitacao" name="modalidadeLicitacao" placeholder="Ex: Preg√£o, Concorr√™ncia..." />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="objetoLicitacao">Objeto da Licita√ß√£o</label>
              <textarea id="objetoLicitacao" name="objetoLicitacao" rows="2" placeholder="Descri√ß√£o do objeto"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="unidade">Unidade/Secretaria Respons√°vel</label>
              <input type="text" id="unidade" name="unidade" />
            </div>
            <div class="form-group">
              <label for="setor">Setor Requisitante</label>
              <input type="text" id="setor" name="setor" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="numProcesso">N√∫mero do Processo Administrativo</label>
              <input type="text" id="numProcesso" name="numProcesso" />
            </div>
            <div class="form-group">
              <label for="anoLicitacao">Ano da Licita√ß√£o</label>
              <input type="text" id="anoLicitacao" name="anoLicitacao" />
            </div>
            <div class="form-group">
              <label for="fonteRecursos">Fonte de Recursos</label>
              <input type="text" id="fonteRecursos" name="fonteRecursos" placeholder="Ex: federal, estadual..." />
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>üóìÔ∏è Prazos e Datas Importantes</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="dataPublicacao">Data da Publica√ß√£o do Edital</label>
              <input type="date" id="dataPublicacao" name="dataPublicacao" />
            </div>
            <div class="form-group">
              <label for="dataAbertura">Data de Abertura das Propostas</label>
              <input type="date" id="dataAbertura" name="dataAbertura" />
            </div>
            <div class="form-group">
              <label for="prazoImpugnacao">Prazo para Impugna√ß√£o</label>
              <input type="date" id="prazoImpugnacao" name="prazoImpugnacao" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="dataJulgamento">Data de Julgamento</label>
              <input type="date" id="dataJulgamento" name="dataJulgamento" />
            </div>
            <div class="form-group">
              <label for="dataHomologacao">Data da Homologa√ß√£o</label>
              <input type="date" id="dataHomologacao" name="dataHomologacao" />
            </div>
            <div class="form-group">
              <label for="dataAdjudicacao">Data da Adjudica√ß√£o</label>
              <input type="date" id="dataAdjudicacao" name="dataAdjudicacao" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="prazoAssinatura">Prazo para Assinatura do Contrato</label>
              <input type="date" id="prazoAssinatura" name="prazoAssinatura" />
            </div>
            <div class="form-group">
              <label for="dataInicioVigencia">Data de In√≠cio da Vig√™ncia</label>
              <input type="date" id="dataInicioVigencia" name="dataInicioVigencia" />
            </div>
            <div class="form-group">
              <label for="dataTerminoVigencia">Data de T√©rmino da Vig√™ncia</label>
              <input type="date" id="dataTerminoVigencia" name="dataTerminoVigencia" />
            </div>
          </div>
        </div>
        <div class="form-section">
          <h3>üìå Andamento/Status</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="statusAtual">Status Atual</label>
              <input type="text" id="statusAtual" name="statusAtual" placeholder="Ex: Em Elabora√ß√£o, Publicado..." />
            </div>
            <div class="form-group">
              <label for="responsavelAtual">Respons√°vel Atual</label>
              <input type="text" id="responsavelAtual" name="responsavelAtual" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="descAndamento">Descri√ß√£o do Andamento Atual</label>
              <textarea id="descAndamento" name="descAndamento" rows="2"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="obsComplementares">Observa√ß√µes Complementares</label>
              <textarea id="obsComplementares" name="obsComplementares" rows="2"></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="linkAcompanhamento">Link para Acompanhamento P√∫blico</label>
              <input type="url" id="linkAcompanhamento" name="linkAcompanhamento" placeholder="https://..." />
            </div>
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn-primary">Salvar Licita√ß√£o</button>
          <button type="button" class="btn-secondary">Cancelar</button>
        </div>
      </form>
    </ng-container>
    <ng-container *ngIf="licitacoesView === 'lista'">
      <div class="propostas-lista-fake">
        <h3>Licita√ß√µes Cadastradas</h3>
        <table>
          <thead>
            <tr>
              <th>N¬∫ Licita√ß√£o</th>
              <th>Modalidade</th>
              <th>Objeto</th>
              <th>Status</th>
              <th style="width:60px;"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let lic of licitacoesFake">
              <td>{{ lic.numero }}</td>
              <td>{{ lic.modalidade }}</td>
              <td>{{ lic.objeto }}</td>
              <td>
                <span class="status-badge" [ngClass]="getStatusBadgeClass(lic.status)">{{ lic.status }}</span>
              </td>
              <td>
                <span class="icon-actions">
                  <i class="bi bi-pencil-square"></i>
                  <i class="bi bi-trash"></i>
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-container>
  </div>
</div> 